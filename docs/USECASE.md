# 상세 Use Case 문서

본 문서는 [PRD](../path/to/PRD.md)와 [IA](../path/to/IA.md)를 기반으로, 가양주 애호가를 위한 술 레시피·양조 현황 기록 서비스의 주요 **Use Case**들을 체계적으로 정리한 문서입니다.  
모든 시나리오는 **한국어**를 기본 언어로 하며, **사용자 인증**(로그인)이 필수적인 시나리오를 전제로 합니다.

---

## 목차
1. [액터 정의 (Actor Definitions)](#액터-정의-actor-definitions)  
2. [Use Case 시나리오 개요 (Use Case Scenarios)](#use-case-시나리오-개요-use-case-scenarios)  
3. [메인 단계 (Main Steps)](#메인-단계-main-steps)  
4. [예외 처리 (Exception Handling)](#예외-처리-exception-handling)  
5. [상세 액터 정의 (Comprehensive Actor Definitions)](#상세-액터-정의-comprehensive-actor-definitions)  
6. [상세 Use Case 시나리오 (Detailed Use Case Scenarios)](#상세-use-case-시나리오-detailed-use-case-scenarios)  
7. [주요 단계 및 이벤트 흐름 (Main Steps and Flow of Events)](#주요-단계-및-이벤트-흐름-main-steps-and-flow-of-events)  
8. [대안 흐름 및 엣지 케이스 (Alternative Flows and Edge Cases)](#대안-흐름-및-엣지-케이스-alternative-flows-and-edge-cases)  
9. [사전 조건과 사후 조건 (Preconditions and Postconditions)](#사전-조건과-사후-조건-preconditions-and-postconditions)  
10. [비즈니스 규칙과 제약 사항 (Business Rules and Constraints)](#비즈니스-규칙과-제약-사항-business-rules-and-constraints)  
11. [예외 처리 절차 (Exception Handling Procedures)](#예외-처리-절차-exception-handling-procedures)  
12. [사용자 인터페이스 고려사항 (User Interface Considerations)](#사용자-인터페이스-고려사항-user-interface-considerations)  
13. [데이터 요구사항 및 흐름 (Data Requirements and Data Flow)](#데이터-요구사항-및-흐름-data-requirements-and-data-flow)  
14. [보안 및 개인정보 보호 고려사항 (Security and Privacy Considerations)](#보안-및-개인정보-보호-고려사항-security-and-privacy-considerations)

---

## 1. 액터 정의 (Actor Definitions)

| 액터 이름         | 설명                                                                                     |
|-------------------|------------------------------------------------------------------------------------------|
| **가양주 애호가** | 개인 사용자. 술 레시피를 작성·관리하고, 양조 일지를 기록하며, 시음회에 참가하거나 개설함.   |
| **시음회 참가자** | 시음회에 참가 신청을 한 사용자. (가양주 애호가와 동일 인물일 수 있으나, 특정 시음회에 관해선 ‘참가자’ 역할) |
| **시스템**        | 데이터베이스, 인증 모듈, 알림(푸시) 모듈 등 내부적으로 동작하며, 사용자 요청을 처리하고 결과를 반환함. |

---

## 2. Use Case 시나리오 개요 (Use Case Scenarios)

1. **UC-01: 로그인/회원가입**  
   - 사용자가 앱을 실행한 뒤 이메일/비밀번호 등을 통해 회원가입 혹은 로그인  
2. **UC-02: 레시피 등록/편집**  
   - 사용자가 새로운 레시피를 작성하거나 기존 레시피를 수정  
3. **UC-03: 양조일지 작성**  
   - 발효 과정에서 사진·메모 등을 기록  
4. **UC-04: 시음회 개설**  
   - 사용자가 시음회를 새로 만들어 일정을 확정하고 참가자를 모집  
5. **UC-05: 시음회 참가**  
   - 사용자가 시음회 목록에서 원하는 시음회에 참가 신청  
6. **UC-06: 레시피 공개/비공개 설정**  
   - 작성된 레시피의 공개 범위 변경  
7. **UC-07: 알코올 도수 계산**  
   - 사용자가 레시피·양조정보를 입력하여 예상 알코올 도수 확인  
8. **UC-08: 성인인증**
	**설명**: 사용자는 최초 회원가입 후 1회 필수로 성인인증(본인인증)을 진행하여 서비스 접근 권한을 얻는다.
	**Precondition**: 회원가입 완료 상태
	**Postcondition**: 성인인증 성공 여부 DB에 저장, 이후 앱 접근 권한 결정

  

**주요 단계(Main Flow)**

1. 사용자: 회원가입 완료 후 최초 앱 진입

2. 시스템: 성인인증 안내 화면 표시 (“휴대폰 본인인증을 통해 성인 여부를 확인해주세요.”)

3. 사용자: 휴대폰 번호 입력 후 본인 인증(문자 인증 등) 진행

4. 시스템: 인증 기관을 통해 성인 여부 확인

5. 시스템: 성인인증 성공 시 홈 화면 이동

6. 시스템: 인증 정보(성인 여부)를 DB에 저장

  

**예외 처리(Exception Handling)**

• 미성년자 확인: “만 19세 미만은 이용할 수 없습니다.” 안내 후 로그아웃 처리

• 본인인증 실패: “인증 실패, 다시 시도해주세요.” 메시지 표시 후 재시도 유도

• 네트워크 오류: “네트워크 오류, 잠시 후 다시 시도해주세요.”

(이 외에도 프로필 설정, 로그아웃 등 부가 시나리오가 있지만, 핵심 흐름 위주로 정의)

---

## 3. 메인 단계 (Main Steps)

아래는 공통적으로 발생하는 전형적 단계들입니다:

1. **인증**  
   - 앱 실행 후 로그인/회원가입 → 토큰 발급 및 유지  
2. **목록 보기**  
   - 레시피 목록, 양조일지 목록, 시음회 목록 등 카드/리스트 형태 조회  
3. **상세 페이지 접근**  
   - 목록에서 특정 항목 클릭 → 상세 화면 진입  
4. **작성/편집**  
   - 양식(Form) 입력 → 저장/등록  
5. **완료 확인**  
   - 성공 시 사용자에게 성공 메시지, 실패 시 예외 처리  

---

## 4. 예외 처리 (Exception Handling)

- **인증 실패**: 잘못된 이메일/비밀번호, 토큰 만료  
- **권한 부족**: 공개 레시피가 아닌데 작성자만 열람 가능할 때  
- **시음회 인원 마감**: 목표 인원 초과 시 참가 신청 불가  
- **입력 값 유효성 실패**: 예) 레시피 작성 시 재료 정보가 비었을 때  

(상세 절차는 [예외 처리 절차](#예외-처리-절차-exception-handling-procedures) 섹션에서 추가 설명)

---

## 5. 상세 액터 정의 (Comprehensive Actor Definitions)

| 액터 이름         | 권한/역할                                                                             | 예시                                         |
|-------------------|----------------------------------------------------------------------------------------|----------------------------------------------|
| **가양주 애호가** | - 레시피 작성, 공개/비공개 설정<br/>- 양조일지 기록<br/>- 시음회 개설/참가<br/>- 프로필 수정 | 일반 사용자의 기본 액터                       |
| **시음회 참가자** | - 기존 시음회 참가 신청<br/>- 시음회 관련 알림 확인                                    | 이벤트별로 사용자가 ‘참가자’ 역할을 수행       |
| **시스템**        | - 인증/DB 관리<br/>- 사진 업로드 처리<br/>- 시음회 모집 인원 체크<br/>- 알림(푸시) 전송 | 백엔드 및 내부 서비스, 무인(Automated) 액터 |

---

## 6. 상세 Use Case 시나리오 (Detailed Use Case Scenarios)

아래는 주요 Use Case에 대한 구체적 시나리오 예시입니다.

### UC-01: 로그인/회원가입

**설명**: 사용자가 앱을 처음 실행했을 때, 계정을 등록하거나 기존 계정으로 로그인한다.

- **Precondition**: 앱 설치 완료, 네트워크 연결  
- **Postcondition**: 유효한 사용자 세션이 생성되었으며, 홈 화면으로 이동  

#### 주요 단계
1. **사용자**: 앱 실행 → 로그인 화면 이동  
2. **시스템**: 이메일/비밀번호 입력 폼 제공  
3. **사용자**: 정보를 입력 후 ‘로그인’ 버튼 클릭  
4. **시스템**: 인증 서버와 연동, 성공 시 토큰 발급  
5. **시스템**: 홈 화면으로 이동, 환영 메시지 표시  

#### 대안 흐름 / 에러 사례
- (A) 이메일 형식 불일치 → 에러 메시지 “올바른 이메일을 입력하세요.”  
- (B) 비밀번호 불일치 → “비밀번호가 틀립니다.”  
- (C) 서버 오류(네트워크 장애 등) → “로그인 서버에 연결할 수 없습니다.”

---

### UC-02: 레시피 등록/편집

**설명**: 사용자가 새 레시피를 작성하거나, 기존 레시피를 편집한다.

- **Precondition**: 로그인 완료, 홈에서 ‘레시피 목록’ 화면 접근  
- **Postcondition**: DB에 새 레시피가 저장되거나 기존 레시피가 수정됨  

#### 주요 단계
1. **사용자**: 레시피 목록 화면에서 ‘+새 레시피 만들기’ 버튼 클릭  
2. **시스템**: 레시피 작성 폼 표시 (이름, 재료, 발효 단계, 공개 여부 등)  
3. **사용자**: 입력 완료 후 ‘저장’ 클릭  
4. **시스템**: 입력 데이터 유효성 검사 후 DB에 저장  
5. **시스템**: 저장 성공 시 “레시피가 등록되었습니다.” 메시지 표시  

#### 대안 흐름 / 엣지 케이스
- (A) 재료 or 이름 필드 비어 있음 → “필수 입력 항목입니다”  
- (B) 저장 중 네트워크 끊김 → “저장 실패, 다시 시도해주세요.”

---

### UC-03: 양조일지 작성

**설명**: 발효 진행 중간에 사진·메모 등을 기록하여 일지를 남긴다.

- **Precondition**: 사용자 인증, 기존 레시피가 있거나 없더라도 ‘새 일지’ 작성 가능  
- **Postcondition**: 새로운 ‘양조일지’ 레코드가 DB에 생성  

#### 주요 단계
1. **사용자**: 홈 → ‘양조일지’ 목록 → ‘새 일지 작성’  
2. **시스템**: 작성 폼(날짜, 사진 첨부, 메모, 재료 투입 정보 등) 제공  
3. **사용자**: 사진 찍기/업로드, 내용 작성  
4. **시스템**: DB에 일지 데이터 저장, 저장 성공 시 목록 갱신  

#### 대안 흐름 / 에러
- 사진 업로드 실패 → “사진 업로드에 실패했습니다.”  
- 재로딩 후 재시도하거나 사진을 다시 찍어 업로드  

---

### UC-04: 시음회 개설

**설명**: 사용자가 직접 시음회를 만들어 일정/장소/모집 인원을 설정한다.

- **Precondition**: 로그인 상태, 시음회 등록 권한은 모든 사용자에게 열려 있음  
- **Postcondition**: 새 시음회가 DB에 등록되고, 모집 페이지가 생성  

#### 주요 단계
1. **사용자**: 홈 → ‘시음회/품평회 목록’ → ‘시음회 개설하기’  
2. **시스템**: 개설 폼(제목, 날짜, 장소, 목표 인원, 기타 설명) 표시  
3. **사용자**: 내용 입력 후 ‘개설 완료’ 클릭  
4. **시스템**: DB에 시음회 정보 생성, 목록에 반영  
5. **시스템**: “시음회가 등록되었습니다.” 알림 표시  

#### 대안 흐름 / 엣지 케이스
- (A) 목표 인원 숫자 형식 오류 → “인원은 숫자로 입력해주세요.”  
- (B) 날짜가 과거 → “지난 날짜로는 시음회를 만들 수 없습니다.”  

---

### UC-05: 시음회 참가

**설명**: 사용자가 이미 개설된 시음회에 참석 신청을 한다.

- **Precondition**: 유효한 시음회가 목록에 존재, 참여 인원 제한이 초과되지 않음  
- **Postcondition**: 해당 사용자 ‘참가자 목록’에 등록  

#### 주요 단계
1. **사용자**: 시음회 목록에서 특정 시음회 클릭 → 시음회 상세 진입  
2. **시스템**: 시음회 상세정보(남은 인원, 장소, 날짜 등) 표시  
3. **사용자**: ‘참가 신청’ 버튼 클릭  
4. **시스템**: 모집 인원 확인 → DB에 참가자로 추가  
5. **시스템**: “참가 신청이 완료되었습니다.” 메시지 표시  

#### 대안 흐름
- (A) 이미 인원 마감된 상태 → “모집이 마감되었습니다.”  
- (B) 이미 참가 신청한 사용자 → “이미 참가한 시음회입니다.”  

---

### UC-06: 레시피 공개/비공개 설정

**설명**: 작성된 레시피를 일반 사용자에게 공개하거나, 비공개로 전환.

- **Precondition**: 본인 레시피여야 하며, 로그인 상태  
- **Postcondition**: 레시피 공개 플래그가 갱신, 목록에서 다른 사용자에게 표시될지 결정  

#### 주요 단계
1. **사용자**: 레시피 상세 화면 → ‘공개 설정’ 토글 클릭  
2. **시스템**: 해당 레시피의 공개 필드를 T/F로 업데이트  
3. **시스템**: 결과 메시지 “레시피가 공개 설정되었습니다.”  

#### 대안 흐름
- (A) 이미 공개 상태 → 비공개 전환 시 확인 팝업 “비공개 전환할까요?”

---

### UC-07: 알코올 도수 계산

**설명**: 발효 중 당도, 발효 기간 등을 입력받아 예상 알코올 도수를 추정.

- **Precondition**: 사용자 입력값(초기 당도, 투입 재료 등)이 존재  
- **Postcondition**: 계산된 도수값이 화면에 표시  

#### 주요 단계
1. **사용자**: 레시피 작성/편집 화면 → ‘도수 계산’ 버튼 클릭  
2. **시스템**: WSCHO 등 공식 기반으로 계산  
3. **시스템**: “예상 도수: n%” 결과 표시  

---

## 7. 주요 단계 및 이벤트 흐름 (Main Steps and Flow of Events)

위 **UC-02~UC-07**의 단계를 종합하면 일반적으로 다음 순서로 진행됩니다:

1. 로그인 → 홈 → (특정 기능 진입)  
2. 목록 열람 → 상세 보기 → 작성/편집(또는 참가 신청)  
3. 시스템 검증 및 DB 업데이트  
4. 결과 메시지(성공·실패) 표시  
5. 필요 시 알림(푸시) 발송  

---

## 8. 대안 흐름 및 엣지 케이스 (Alternative Flows and Edge Cases)

- **네트워크 불안정**:  
  1. 저장/참가 시 요청이 타임아웃  
  2. “네트워크 상태를 확인해주세요.” 표시 → 재시도
- **중복 등록**:  
  - 이미 같은 이름의 레시피 존재 시 “중복 레시피” 경고  
- **허가되지 않은 접근**:  
  - 로그아웃 상태에서 목록 접근 시 “로그인이 필요합니다.”  

---

## 9. 사전 조건과 사후 조건 (Preconditions and Postconditions)

| Use Case  | 사전 조건(Preconditions)                                                                                                                                                                                           | 사후 조건(Postconditions)                                                                                                                                                                                             |
|-----------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 로그인    | - 앱 실행, 네트워크 연결                                                                                                                                                                                           | - 사용자 세션(토큰) 발급<br/>- 홈 화면 표시                                                                                                                                                                               |
| 레시피 등록 | - 로그인 완료<br/>- 홈에서 레시피 목록 진입                                                                                                                                                                      | - 새 레시피 DB에 저장<br/>- 목록에 반영                                                                                                                                                                                 |
| 양조일지  | - 로그인<br/>- 홈에서 일지 목록 진입                                                                                                                                                                              | - 새 일지(사진·메모) 생성<br/>- 목록 갱신                                                                                                                                                                               |
| 시음회 개설 | - 로그인<br/>- 홈에서 시음회 목록 진입                                                                                                                                                                           | - 새 시음회 정보 DB에 저장<br/>- 모집 화면 표시                                                                                                                                                                          |
| 시음회 참가 | - 로그인<br/>- 시음회가 존재하고 인원이 마감되지 않음                                                                                                                                                            | - 참가 목록에 사용자 추가<br/>- 참가 성공 메시지                                                                                                                                                                        |

---

## 10. 비즈니스 규칙과 제약 사항 (Business Rules and Constraints)

1. **공개·비공개 설정**: 작성자 본인만 변경 가능  
2. **시음회 모집 인원**: 0 이상, 최대 100명(예시)  
3. **알코올 도수 계산**: 추정 값이므로 실제와 다를 수 있음 (면책 조항 안내)  
4. **레시피 공유**: 공개된 레시피만 다른 사용자에게 검색 가능  

---

## 11. 예외 처리 절차 (Exception Handling Procedures)

- **입력값 오류**  
  - 필수 입력 누락 시, 빨간 색 안내문구와 함께 저장 불가  
- **서버 오류**  
  - “서버와 통신이 원활하지 않습니다. 잠시 후 다시 시도해주세요.”  
- **로그인 세션 만료**  
  - “다시 로그인해주세요.” → 로그인 화면으로 이동  

---

## 12. 사용자 인터페이스 고려사항 (User Interface Considerations)

1. **모바일 우선**  
   - React Native 레이아웃 최적화  
   - 버튼 크기/간격을 44px 이상 (터치 접근성)  
2. **사진 업로드**  
   - 카메라 권한 요청, 갤러리 접근 시 파일 브라우저 표시  
3. **알림(푸시)**  
   - iOS, Android 푸시 권한 요청, 시음회 인원 달성 시 알림 전송  

---

## 13. 데이터 요구사항 및 흐름 (Data Requirements and Data Flow)

| 데이터 종류         | 필드/속성                           | 설명                                                         |
|---------------------|--------------------------------------|--------------------------------------------------------------|
| **User**            | email, password, nickname, token 등  | 인증/권한 체크                                              |
| **Recipe**          | name, ingredients, steps, isPublic 등| 레시피 제목, 재료 목록, 공개 여부, 알코올 도수(옵션)         |
| **Journal**(양조일지)| journalDate, photos, memo, recipeId   | 날짜별 기록, 사진, 메모, 연관 레시피                         |
| **Event**(시음회)   | title, date, location, maxCapacity 등 | 시음회 일정, 장소, 모집 인원                                 |
| **Enrollment**      | userId, eventId, status              | 시음회 참가 신청 내역                                        |

**데이터 흐름**:  
- 앱 → (Network) → Supabase(혹은 DB 서버) → 인증/CRUD → 결과를 앱으로 반환  
- 사진: Supabase Storage/외부 S3. 업로드 후 URL을 DB에 저장  

---

## 14. 보안 및 개인정보 보호 고려사항 (Security and Privacy Considerations)

1. **인증 토큰 관리**  
   - 안전한 저장(AsyncStorage 등)  
   - HTTPS 통신  
2. **비밀번호 암호화**  
   - 서버 측 해싱/솔트 처리  
3. **개인정보 최소 수집**  
   - 이메일, 닉네임, 사진 등만. 주민등록번호 등 민감정보는 수집하지 않음  
4. **접근 권한**  
   - 비공개 레시피는 작성자 본인만 열람 가능  
   - 시음회 참가자 정보는 당사자와 호스트에게만 공개  

---

## 결론

위와 같은 **Use Case** 정의를 통해, 가양주 애호가 앱의 **로그인/레시피/양조일지/시음회/도수 계산** 등 주요 기능을 구체적으로 시나리오화하였습니다. 본 문서는 개발 단계에서 요구사항 명세와 테스트 케이스 작성에 활용되며, 새로운 기능 추가·수정 시 업데이트가 필요합니다.